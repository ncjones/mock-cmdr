version: "3"
services:
  wiremock:
    image: rodolpheche/wiremock
  cucumber:
    depends_on: [ wiremock ]
    working_dir: /work
    command:
      - bash
      - -c
      - |
        yarn wait-on tcp:wiremock:8080 &&
        echo "
        Skipping Cucumber. To execute Cucumber tests, run:
        docker-compose run cucumber yarn cucumber"
  script:
    image: node:12
    working_dir: /work
    volumes:
      - .:/work
    command:
      - echo
      - |
        To execute a script, run:
        docker-compose run script {command}
